## 2.1 컴퓨터 네트워크를 구성하는 기기

컴퓨터 네트워크 = 단말기 + 네트워크 기기
단말기 = 통신하는 주체, 일반적인 컴퓨터라고 생각하면 편하다.
example) 컴퓨터, 노트북, 스마트폰, 서버

컴퓨터 네트워크의 형태
- 그냥 컴퓨터끼리 연결
- 링 형태
- 네트워크 기기를 중간에 두고 단말기들이 네트워크 기기에 연결 (LAN), 별 위상이라고 부른다.

### 2.1.1 OSI 모델

계층 1 : 물리 계층 
하드웨어를 다룸.

계층 2 : 데이터 링크 계층
LAN통신을 가능하게 함.

계층 3 : 네트워크 계층
WAN통신을 가능하게 함

계층 4: 전송 계층
신뢰적인 데이터 전송 보장, 계층 2에서의 신뢰적 데이터 보장이란 것은 데이터가 변조없이 가게 하는 것이지 
상대방에게 데이터가 도착하는 것을 보장하지 않는다.

계층 5: 세션 계층
계층 6: 표현 계층
계층 7: 응용 계층
응용 프로그램이나 운영체제 안 모듈이 다른 컴퓨터의 응용 프로그램이나 운영체제 모듈과
통신을 하는 동안 논리적 연결 단위나 기능들은 계층 5~7에서 다루게 된다. 

### 2.1.2 OSI 모델의 계층 2

- 각 단말기는 고유한 주소를 갖습니다.
- 단말기는 데이터 프레임이라는 단위로 주고받습니다. 


### 2.1.3 OSI 모델의 계층 3

- 라우터 : 간단하게, 서로 다른 LAN 사이에 컴퓨터 통신을 할 수 있게 하는 장비이다. 

## 2.2 인터넷 

OSI 모델 계층 3의 인터넷 프로토콜, 즉 IP규약을 지키면 기기 종류와 상관없이 서로 통신할 수 있습니다. 
통신 회선의 형태가 랜선이든 광섬유, 무선, 전화선 등 어떤 것이든 간에 상관없습니다. 이렇게 서로 다른 종류의 많은
스위치와 라우터가 연결되어 지구를 뒤덮고 있는데, 이를 <strong>인터넷</strong>이라고 합니다.

## 2.3 컴퓨터 네트워크 데이터 

### 2.3.1 스트림 형식
스트림 : 데이터의 흐름
두 단말기를 연결한 후 그 연결을 끊기 전까지 한쪽에서 다른 한쪽으로 연결된 데이터 흐름을 일컫는다.

~~~c++
void PrintFileContent(){
    fp = OpenFile("a.txt");
    while(!fp.IsEOF()){
        data = fp.ReadStream(100);
        Print(data);
    }
}
~~~
위의 코드는 간단히 설명해보면, 
먼저 파일을 열고 100바이트씩 읽어들인다. 이때 실제로 읽어 들이는 데이터는
항상 100바이트는 아니다. 0과 100사이일 수 있다.

컴퓨터 네트워크에서 스트림은 좀 독특한 양상이 있다.
단말기 A에서 스트림 형태로 송신하고 단말기 B에서 그 스트림을 수신한다고 가정하면, 
단말기 A에서 스트림에 넣은 데이터가 단말기 B에서 꺼낸 것과 완전히 같지 않을 수 있다. 하지만 단말기 A에서 
보낸 것을 모두 이어 보면 단말기 B에서 꺼낸 것을 이은 것과 같다. 

보내는 쪽에서 aaa, bbb, ccc 총 3회의 데이터 송신을 하더라도, 수신 측에서는 aaab, b, bc, cc 이런식으로 받을 수 있다.

따라서 스트림 형식으로 데이터를 송수신할 때, 데이터가 여러 부분으로 나뉘어 있다면 이것을 따로 정의해줘야한다.
예를 들어 어떤 데이터를 보내기 전에, 보낼 데이터의 크기를 먼저 보낸다든지 데이터의 시작이나 끝을 알리는 특정 기호를 추가하는 방법으로
말이다. 
전자는 헤더를 붙이는 방식이라고 하며
후자는 구분자를 이용하는 방식이라고 합니다. 

example )
- 헤더
  - 첫 2바이트에는 보낼 데이터의 크기를 담습니다.
  - 이어서 보낼 데이터를 담습니다.
- 구분자
  - 보낼 데이터를 담습니다.
  - 이어서 구분자를 담습니다. 

구분자 방식을 쓸경우, 구분자를 제외하고 보낼 데이터에는 구분자와 같은 값이 없어야 한다. 

### 2.3.2 메시지 형식
스트림과 메시지는 자체적으로 데이터의 시작과 끝을 구별할 수 있다. 
따라서 보내느 쪽에서 aaa, bbb, ccc를 보낼 경우 받는 쪽에서는 aaa, bbb, ccc를 받습니다. 보낸 개수와 받는 개수가 같으며
보낸 데이터와 받는 데이터의 시작과 끝은 같습니다. 이렇게 각 데이터가 정확히 구별되는 것을 메시지 형식이라고 부릅니다.

메시지 형식은 데이터 시작과 끝을 구별할 필요가 없습니다. 메시지를 여러 필드로 나누어서 사용하는 것으로 충분합니다.

네트워크 게임에서는 특정 시점에서 사건을 알리는 경우가 많아서 메시지 형식의 데이터 송수신이 보편적입니다. 

- IP패킷
  - 페이로드의 크기와 송신자 주소, 수신자 주소, 체크섬 등이 들어있다.
  - IP패킷 하나의 크기는 제한되어 있다. 반면에 스트림이나 메시지에서는 이러한 제한이 없습니다.
    - 운영체제에 내장된 네트워크 모듈인 네트워크 스택에서 프로그램이 보내고 받는 스트림과 메시지를 관리해주기 때문이다.
  - 프로그램이 매우 긴 스트림을 송신할 때 운영체제는 이를 IP 패킷의 크기 제한에 맞추어 여러 조각을 내는데 이를 <strong>단편화</strong>라고 합니다. 
